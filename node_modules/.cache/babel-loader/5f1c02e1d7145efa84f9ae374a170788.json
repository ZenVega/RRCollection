{"ast":null,"code":"var _jsxFileName = \"/Users/Urs/code/rrcollection/src/components/App.js\";\nimport React, { useState } from 'react';\nimport Searchbar from './SearchBar';\nimport Editor from './Editor';\nimport Collection from './Collection';\nimport SearchResults from './SearchResults';\nimport Discogs from './util/Discogs';\nimport './App.css';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { add } from '../actions';\n\nfunction App() {\n  const records = useSelector(state => state.records);\n  const dispatch = useDispatch();\n  const [search, setSearch] = useState([]);\n  const [type, setType] = useState(\"release_title\");\n  const [hidden, setHidden] = useState({\n    display: 'none'\n  });\n  const [cause, setCause] = useState(\"edit\");\n  const [version, setVersion] = useState({\n    header: 'Add Record',\n    button: \"Add\"\n  });\n  /* const [records, setRecords] = useState([\n    {\n      title:\"Chocolate & Cheese\",\n      artistID: 1,\n      labelID: 3,\n      year: 2000,\n      size: 12\n    },\n    {\n      title:\"Quebec\",\n      artistID: 1,\n      labelID: 3,\n      year: 2005,\n      size: 12\n    },\n    {\n      title:\"Selftitled\",\n      artistID: 2,\n      labelID: 1,\n      year: 2005,\n      size: 12\n    },\n    \n  ]); */\n\n  const [artists, setArtists] = useState([{\n    name: \"Ween\",\n    artistID: 1\n  }, {\n    name: \"AUS\",\n    artistID: 2\n  }]);\n  const [labels, setLabels] = useState([{\n    name: \"static shock\",\n    labelID: 1\n  }, {\n    name: \"noise solution\",\n    labelID: 2\n  }, {\n    name: \"weenRecs\",\n    labelID: 3\n  }]);\n\n  const handleSearch = (term, type) => {\n    Discogs.search(term, type).then(response => setSearch(response.results));\n  };\n\n  const sortBy = interest => {\n    setType(interest);\n  };\n\n  const addRecord = (artist, title, year, label, size) => {\n    let artistID;\n    let artistObj = artists.find(inListArtist => inListArtist.name === artist);\n\n    if (artistObj) {\n      artistID = artistObj.artistID;\n    }\n\n    if (!artistID) {\n      artistID = Math.floor(Math.random() * 10 * 1000);\n      const artistsList = [...artists, {\n        name: artist,\n        artistID: artistID\n      }];\n      setArtists(artistsList);\n    }\n\n    let labelID;\n    let labelObj = labels.find(inListLabel => inListLabel.name === label);\n\n    if (labelObj) {\n      labelID = labelObj.labelID;\n    }\n\n    if (!labelID) {\n      labelID = Math.floor(Math.random() * 10 * 1000);\n      const labelsList = [...labels, {\n        name: label,\n        labelID: labelID\n      }];\n      setLabels(labelsList);\n    }\n    /*     const recordList = [...records, {\n          artistID,\n          title,\n          year,\n          size,\n          labelID\n        }]; */\n\n\n    const recordToAdd = {\n      artistID,\n      title,\n      year,\n      size,\n      labelID\n    };\n    dispatch(add(recordToAdd));\n  };\n\n  const removeRecord = index => {\n    console.log(index);\n    const recordList = [...records];\n    recordList.splice(index, 1);\n    /*   setRecords(recordList); */\n\n    console.log(recordList);\n  };\n\n  const passForSuggestions = (array, topic) => {\n    let suggestions = [];\n    array.map(element => suggestions.push(element[topic]));\n    return suggestions;\n  };\n\n  const changeVersion = () => {\n    if (cause === \"add\") {\n      setVersion({\n        header: 'Add Record',\n        button: \"Add\"\n      });\n    } else {\n      setVersion({\n        header: 'Edit Record',\n        button: \"Save Changes\"\n      });\n    }\n  };\n\n  const showEditor = ed_add => {\n    setCause(ed_add);\n    changeVersion();\n    setHidden({\n      display: \"flex\"\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Searchbar, {\n    searchFor: type,\n    onSearch: handleSearch,\n    showEditor: showEditor,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Editor, {\n    index: cause,\n    version: version,\n    style: hidden,\n    setHidden: setHidden,\n    onAdd: addRecord,\n    onRemove: removeRecord,\n    titles: passForSuggestions(records, \"title\"),\n    artists: passForSuggestions(artists, \"name\"),\n    labels: passForSuggestions(labels, \"name\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(SearchResults, {\n    isHidden: hidden,\n    results: search,\n    onAdd: addRecord,\n    sort: sortBy,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Collection, {\n    showEditor: showEditor,\n    labels: labels,\n    artists: artists,\n    records: records,\n    removeRecord: removeRecord,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/Urs/code/rrcollection/src/components/App.js"],"names":["React","useState","Searchbar","Editor","Collection","SearchResults","Discogs","useSelector","useDispatch","add","App","records","state","dispatch","search","setSearch","type","setType","hidden","setHidden","display","cause","setCause","version","setVersion","header","button","artists","setArtists","name","artistID","labels","setLabels","labelID","handleSearch","term","then","response","results","sortBy","interest","addRecord","artist","title","year","label","size","artistObj","find","inListArtist","Math","floor","random","artistsList","labelObj","inListLabel","labelsList","recordToAdd","removeRecord","index","console","log","recordList","splice","passForSuggestions","array","topic","suggestions","map","element","push","changeVersion","showEditor","ed_add"],"mappings":"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","sourcesContent":["import React, { useState} from 'react';\nimport Searchbar from './SearchBar';\nimport Editor from './Editor';\nimport Collection from './Collection';\nimport SearchResults from './SearchResults';\nimport Discogs from './util/Discogs';\nimport './App.css';\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport { add } from '../actions'\n\n\n\nfunction App() {\n  const records = useSelector(state => state.records)\n  const dispatch = useDispatch();\n\n  const [search, setSearch] = useState([]);\n  const [type, setType] = useState(\"release_title\");\n  const [hidden, setHidden] = useState({display: 'none'});\n  const [cause, setCause] = useState(\"edit\");\n  \n  const [version, setVersion] = useState(\n    {\n    header: 'Add Record',\n    button: \"Add\"\n    }\n  )\n\n  /* const [records, setRecords] = useState([\n    {\n      title:\"Chocolate & Cheese\",\n      artistID: 1,\n      labelID: 3,\n      year: 2000,\n      size: 12\n    },\n    {\n      title:\"Quebec\",\n      artistID: 1,\n      labelID: 3,\n      year: 2005,\n      size: 12\n    },\n    {\n      title:\"Selftitled\",\n      artistID: 2,\n      labelID: 1,\n      year: 2005,\n      size: 12\n    },\n    \n  ]); */\n\n  const [artists, setArtists] = useState([\n    {\n      name: \"Ween\",\n      artistID: 1\n    },\n    {\n      name: \"AUS\",\n      artistID: 2\n  }]);\n\n  const [labels, setLabels] = useState([\n    {\n      name: \"static shock\",\n      labelID: 1\n    },\n    {\n      name: \"noise solution\",\n      labelID: 2\n    },\n    {\n      name: \"weenRecs\",\n      labelID: 3\n    }\n\n  ]);\n\n  const handleSearch = (term, type) => {\n    Discogs.search(term, type).then(response => setSearch(response.results));\n  }\n\n  const sortBy = (interest) => {\n      setType(interest)\n  }\n\n  const addRecord = (artist, title, year, label, size) => {\n\n    let artistID;\n    let artistObj = artists.find(inListArtist => inListArtist.name === artist);\n    if(artistObj){\n      artistID = artistObj.artistID;\n    }\n\n    if(!artistID){\n      artistID = Math.floor(Math.random()*10*1000);\n\n      const artistsList = [...artists, {\n        name: artist,\n        artistID: artistID\n      }];\n      \n      setArtists(artistsList);\n    }\n\n    let labelID;\n    let labelObj = labels.find(inListLabel => inListLabel.name === label);\n    if(labelObj){\n      labelID = labelObj.labelID;\n    }\n\n    if(!labelID){\n      labelID = Math.floor(Math.random()*10*1000);\n\n      const labelsList = [...labels, {\n        name: label,\n        labelID: labelID\n      }];\n      \n      setLabels(labelsList);\n    }\n    \n/*     const recordList = [...records, {\n      artistID,\n      title,\n      year,\n      size,\n      labelID\n    }]; */\n\n    const recordToAdd = {\n      artistID,\n      title,\n      year,\n      size,\n      labelID\n    };\n\n    dispatch(add(recordToAdd));\n  }\n\n  const removeRecord = index => {\n    console.log(index);\n    const recordList = [...records];\n    recordList.splice(index, 1);\n  /*   setRecords(recordList); */\n    console.log(recordList);\n\n  }\n\n\n  const passForSuggestions = (array, topic) => {\n    let suggestions = [];\n    array.map(element => suggestions.push(element[topic]));\n    return suggestions;\n  }\n\n\n  const changeVersion = () => {\n    if(cause === \"add\") {\n      setVersion(\n        {\n          header: 'Add Record',\n          button: \"Add\"\n        }\n      )\n    } else {\n      setVersion(\n        {\n          header: 'Edit Record',\n          button: \"Save Changes\"\n        }\n      )\n    }\n  };\n\n\n  const showEditor = (ed_add) => {\n\n   setCause(ed_add);\n   changeVersion();\n   setHidden({ display: \"flex\" });\n  }\n\n\n  return (\n    <div className=\"App\">\n      <Searchbar \n        searchFor={type}\n        onSearch={handleSearch}\n        showEditor={showEditor}\n        />\n      <Editor\n        index = {cause}\n        version={version}\n        style={hidden}\n        setHidden={setHidden}\n        onAdd={addRecord} \n        onRemove={removeRecord}\n        titles={passForSuggestions(records, \"title\")}\n        artists={passForSuggestions(artists, \"name\")}\n        labels={passForSuggestions(labels, \"name\")}/>\n      <SearchResults \n        isHidden={hidden} \n        results={search} \n        onAdd={addRecord}\n        sort={sortBy}/>\n      <Collection \n        showEditor={showEditor}\n        labels={labels}\n        artists={artists}\n        records={records}\n        removeRecord={removeRecord}/>\n    </div>\n  );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}
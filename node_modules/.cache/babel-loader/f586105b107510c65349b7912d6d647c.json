{"ast":null,"code":"var _jsxFileName = \"/Users/Urs/code/rrcollection/src/components/App.js\";\nimport React, { useState } from 'react';\nimport Searchbar from './SearchBar';\nimport Editor from './Editor';\nimport Collection from './Collection';\nimport SearchResults from './SearchResults';\nimport Discogs from './util/Discogs';\nimport './App.css';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { addRecord, removeRecord } from '../actions';\n\nfunction App() {\n  const records = useSelector(state => state.collection.records);\n  const labels = useSelector(state => state.collection.labels);\n  const artists = useSelector(state => state.collection.artists);\n  const dispatch = useDispatch();\n  const [search, setSearch] = useState([]);\n  const [type, setType] = useState(\"release_title\");\n  const [hidden, setHidden] = useState({\n    display: 'none'\n  });\n  const [cause, setCause] = useState(\"edit\");\n  const [version, setVersion] = useState({\n    header: 'Add Record',\n    button: \"Add\"\n  });\n\n  const handleSearch = (term, type) => {\n    Discogs.search(term, type).then(response => setSearch(response.results));\n  };\n\n  const sortBy = interest => {\n    setType(interest);\n  };\n\n  const addRecord = (artist, title, year, label, size) => {\n    let artistID;\n    let artistObj = artists.find(inListArtist => inListArtist.name === artist);\n\n    if (artistObj) {\n      artistID = artistObj.artistID;\n    }\n\n    if (!artistID) {\n      artistID = Math.floor(Math.random() * 10 * 1000);\n      const artistsList = [...artists, {\n        name: artist,\n        artistID: artistID\n      }];\n      /*  setArtists(artistsList); */\n    }\n\n    let labelID;\n    let labelObj = labels.find(inListLabel => inListLabel.name === label);\n\n    if (labelObj) {\n      labelID = labelObj.labelID;\n    }\n\n    if (!labelID) {\n      labelID = Math.floor(Math.random() * 10 * 1000);\n      const labelsList = [...labels, {\n        name: label,\n        labelID: labelID\n      }];\n    }\n\n    const recordToAdd = {\n      artistID,\n      title,\n      year,\n      size,\n      labelID\n    };\n    dispatch(addRecord(recordToAdd));\n  };\n\n  const removeRecord = index => {\n    dispatch(removeRecord(index));\n  };\n\n  const passForSuggestions = (array, topic) => {\n    let suggestions = [];\n    array.map(element => suggestions.push(element[topic]));\n    return suggestions;\n  };\n\n  const changeVersion = () => {\n    if (cause === \"add\") {\n      setVersion({\n        header: 'Add Record',\n        button: \"Add\"\n      });\n    } else {\n      setVersion({\n        header: 'Edit Record',\n        button: \"Save Changes\"\n      });\n    }\n  };\n\n  const showEditor = ed_add => {\n    setCause(ed_add);\n    changeVersion();\n    setHidden({\n      display: \"flex\"\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Searchbar, {\n    searchFor: type,\n    onSearch: handleSearch,\n    showEditor: showEditor,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Editor, {\n    index: cause,\n    version: version,\n    style: hidden,\n    setHidden: setHidden,\n    onAdd: addRecord,\n    onRemove: removeRecord,\n    titles: passForSuggestions(records, \"title\"),\n    artists: passForSuggestions(artists, \"name\"),\n    labels: passForSuggestions(labels, \"name\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(SearchResults, {\n    isHidden: hidden,\n    results: search,\n    onAdd: addRecord,\n    sort: sortBy,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Collection, {\n    showEditor: showEditor,\n    labels: labels,\n    artists: artists,\n    records: records,\n    removeRecord: removeRecord,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/Urs/code/rrcollection/src/components/App.js"],"names":["React","useState","Searchbar","Editor","Collection","SearchResults","Discogs","useSelector","useDispatch","addRecord","removeRecord","App","records","state","collection","labels","artists","dispatch","search","setSearch","type","setType","hidden","setHidden","display","cause","setCause","version","setVersion","header","button","handleSearch","term","then","response","results","sortBy","interest","artist","title","year","label","size","artistID","artistObj","find","inListArtist","name","Math","floor","random","artistsList","labelID","labelObj","inListLabel","labelsList","recordToAdd","index","passForSuggestions","array","topic","suggestions","map","element","push","changeVersion","showEditor","ed_add"],"mappings":"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","sourcesContent":["import React, { useState} from 'react';\nimport Searchbar from './SearchBar';\nimport Editor from './Editor';\nimport Collection from './Collection';\nimport SearchResults from './SearchResults';\nimport Discogs from './util/Discogs';\nimport './App.css';\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport { addRecord, removeRecord } from '../actions'\n\n\n\nfunction App() {\n  const records = useSelector(state => state.collection.records)\n  const labels = useSelector(state => state.collection.labels)\n  const artists = useSelector(state => state.collection.artists)\n  const dispatch = useDispatch();\n\n  const [search, setSearch] = useState([]);\n  const [type, setType] = useState(\"release_title\");\n  const [hidden, setHidden] = useState({display: 'none'});\n  const [cause, setCause] = useState(\"edit\");\n  \n  const [version, setVersion] = useState(\n    {\n    header: 'Add Record',\n    button: \"Add\"\n    }\n  )\n\n\n  const handleSearch = (term, type) => {\n    Discogs.search(term, type).then(response => setSearch(response.results));\n  }\n\n  const sortBy = (interest) => {\n      setType(interest)\n  }\n\n  const addRecord = (artist, title, year, label, size) => {\n\n    let artistID;\n    let artistObj = artists.find(inListArtist => inListArtist.name === artist);\n    if(artistObj){\n      artistID = artistObj.artistID;\n    }\n\n    if(!artistID){\n      artistID = Math.floor(Math.random()*10*1000);\n\n      const artistsList = [...artists, {\n        name: artist,\n        artistID: artistID\n      }];\n      \n     /*  setArtists(artistsList); */\n    }\n\n    let labelID;\n    let labelObj = labels.find(inListLabel => inListLabel.name === label);\n    if(labelObj){\n      labelID = labelObj.labelID;\n    }\n\n    if(!labelID){\n      labelID = Math.floor(Math.random()*10*1000);\n\n      const labelsList = [...labels, {\n        name: label,\n        labelID: labelID\n      }];\n      \n    }\n\n\n    const recordToAdd = {\n      artistID,\n      title,\n      year,\n      size,\n      labelID\n    };\n\n    dispatch(addRecord(recordToAdd));\n  }\n\n  const removeRecord = index => {\n\n    dispatch(removeRecord(index));\n\n  }\n\n\n  const passForSuggestions = (array, topic) => {\n    let suggestions = [];\n    array.map(element => suggestions.push(element[topic]));\n    return suggestions;\n  }\n\n\n  const changeVersion = () => {\n    if(cause === \"add\") {\n      setVersion(\n        {\n          header: 'Add Record',\n          button: \"Add\"\n        }\n      )\n    } else {\n      setVersion(\n        {\n          header: 'Edit Record',\n          button: \"Save Changes\"\n        }\n      )\n    }\n  };\n\n\n  const showEditor = (ed_add) => {\n\n   setCause(ed_add);\n   changeVersion();\n   setHidden({ display: \"flex\" });\n  }\n\n\n  return (\n    <div className=\"App\">\n      <Searchbar \n        searchFor={type}\n        onSearch={handleSearch}\n        showEditor={showEditor}\n        />\n      <Editor\n        index = {cause}\n        version={version}\n        style={hidden}\n        setHidden={setHidden}\n        onAdd={addRecord} \n        onRemove={removeRecord}\n        titles={passForSuggestions(records, \"title\")}\n        artists={passForSuggestions(artists, \"name\")}\n        labels={passForSuggestions(labels, \"name\")}/>\n      <SearchResults \n        isHidden={hidden} \n        results={search} \n        onAdd={addRecord}\n        sort={sortBy}/>\n      <Collection \n        showEditor={showEditor}\n        labels={labels}\n        artists={artists}\n        records={records}\n        removeRecord={removeRecord}/>\n    </div>\n  );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}